@model IEnumerable<Varejo.ViewModels.FamiliaViewModel>

@{
	ViewData["Title"] = "Famílias";
}

<h2>@ViewData["Title"]</h2>

<p>
	<a asp-action="Create" class="btn btn-primary">Criar Nova Família</a>
</p>

<!-- FILTROS -->
<form method="get" class="mb-3">
	<div class="row g-2">
		<div class="col-md-3">
			<input type="text" name="search" value="@ViewBag.Search" class="form-control" placeholder="Pesquisar por nome" />
		</div>
		<div class="col-md-3">
			<select name="marcaId" class="form-select" asp-items="ViewBag.Marcas">
				<option value="">Todas as Marcas</option>
			</select>
		</div>
		<div class="col-md-3">
			<select name="categoriaId" class="form-select" asp-items="ViewBag.Categorias">
				<option value="">Todas as Categorias</option>
			</select>
		</div>
		<div class="col-md-3">
			<button type="submit" class="btn btn-secondary w-100">Filtrar</button>
		</div>
	</div>
</form>
<div class="table-responsive" style="border-radius: 12px; overflow: hidden;">
	<table class="w-100">
		<thead class="thead-dark">
			<tr class="text-center">
				<th>#</th>
				<th>Nome</th>
				<th>Marca</th>
				<th>Categoria</th>
				<th>Ativo</th>
				<th>Ações</th>
			</tr>
		</thead>
		<tbody>
			@if (Model != null && Model.Any())
			{
				foreach (var familia in Model)
				{
					<tr class="text-center">
						<td>@familia.IdFamilia</td>
						<td>@familia.NomeFamilia</td>
						<td>@familia.Marca?.NomeMarca</td>
						<td>@familia.Categoria?.DescricaoCategoria</td>
						<td>@(familia.Ativo ? "✅" : "❌")</td>
						<td>
							<a asp-action="Details" asp-route-id="@familia.IdFamilia" class="btn btn-sm btn-info">Exibir Produtos</a>
							<a asp-action="Edit" asp-route-id="@familia.IdFamilia" class="btn btn-sm btn-warning">Editar</a>
						</td>
					</tr>
				}
			}
			else
			{
				<tr>
					<td colspan="6" class="text-center">Nenhuma família encontrada.</td>
				</tr>
			}
		</tbody>
	</table>
</div>