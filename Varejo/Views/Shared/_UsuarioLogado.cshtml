@using System.Security.Claims

@{
    var nome = User.Identity?.Name ?? "Visitante";
    var role = User.FindFirst(ClaimTypes.Role)?.Value ?? "Outros";

    var icone = role switch
    {
        "Administrador" => "avatar-admin.png",
        "Gerente" => "avatar-gerente.png",
        _ => "avatar-outros.png"
    };

    var badge = role switch
    {
        "Administrador" => "danger",
        "Gerente" => "warning",
        _ => "secondary"
    };
}

@if (User.Identity?.IsAuthenticated ?? false)
{
    <div class="d-flex align-items-center gap-2">
        <img src="~/img/@icone" width="36" height="36" class="rounded-circle border shadow-sm" alt="Avatar" />
        <div class="text-white small">
            Olá, <strong>@nome</strong>
            <span class="badge bg-@badge">@role</span>
        </div>
        <a asp-controller="Usuario" asp-action="Logout" class="btn btn-outline-light btn-sm ms-2">Sair</a>
    </div>
}
else
{
    <a asp-controller="Usuario" asp-action="Login" class="btn btn-outline-light btn-sm">Entrar</a>
}
